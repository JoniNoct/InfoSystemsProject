{"ast":null,"code":"var _jsxFileName = \"/home/joni/Documents/InfoSystemsProject/front_part/src/login.js\";\nimport logo from \"./logo.svg\";\nimport axios from 'axios';\nimport \"./App.css\";\nimport React, { Component } from \"react\";\nimport { setAuthToken } from \"./setAuth\";\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleSubmit = e => {\n      //reqres registered sample user\n      const loginPayload = {\n        username: this.state.username,\n        password: this.state.password\n      };\n      axios.post(\"http://127.0.0.1:5000/login\", loginPayload).then(response => {\n        //get token from response\n        const token = response.data.access_token;\n        //set JWT token to local\n        console.log(token);\n        localStorage.setItem(\"token\", token);\n\n        //set token to axios common header\n        setAuthToken(token);\n        window.location.href = '/projects';\n      }).catch(err => console.log(err));\n    };\n    this.handleOnChange = value => {\n      return e => {\n        this.setState({\n          [value]: e.target.value\n        });\n      };\n    };\n    this.state = {\n      username: \"\",\n      password: \"\",\n      list: []\n    };\n  }\n\n  // handleSubmit = (e) => {\n  //   fetch(\"http://127.0.0.1:5000/login\", {\n  //     method: \"POST\",\n  //     mode: \"cors\",\n  //     cache: \"no-cache\",\n  //     credentials: \"same-origin\",\n  //     headers: {\n  //       \"Content-Type\": \"application/json\",\n  //     },\n\n  //     body: JSON.stringify({\n  //       username: this.state.username,\n  //       password: this.state.password,\n  //     }),\n  //   }).then((response) => {\n\n  //     response.json().then(function (result) {\n  //       localStorage.setItem(\"access_token\", result['access_token']);\n  //       setAuthToken(result['access_token']);\n  //     });\n  //   });\n  // };\n\n  render() {\n    console.log(this.state);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      align: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        align: \"center\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Username:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        onChange: this.handleOnChange(\"username\"),\n        value: this.state.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Password:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        onChange: this.handleOnChange(\"password\"),\n        value: this.state.password\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MyButton, {\n        onClick: this.handleSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this);\n  }\n}\nclass MyButton extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"MyButton\",\n      onClick: this.props.onClick,\n      children: \"login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 12\n    }, this);\n  }\n}\nclass Input extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"input\", {\n      className: \"LoginInput\",\n      onChange: this.props.onChange,\n      value: this.props.value\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default Login;","map":{"version":3,"names":["logo","axios","React","Component","setAuthToken","BrowserRouter","Router","Switch","Route","Link","Login","constructor","props","handleSubmit","e","loginPayload","username","state","password","post","then","response","token","data","access_token","console","log","localStorage","setItem","window","location","href","catch","err","handleOnChange","value","setState","target","list","render","MyButton","onClick","Input","onChange"],"sources":["/home/joni/Documents/InfoSystemsProject/front_part/src/login.js"],"sourcesContent":["import logo from \"./logo.svg\";\nimport axios from 'axios';\nimport \"./App.css\";\nimport React, { Component } from \"react\";\nimport { setAuthToken } from \"./setAuth\";\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { username: \"\", password: \"\", list: [] };\n  }\n\n  // handleSubmit = (e) => {\n  //   fetch(\"http://127.0.0.1:5000/login\", {\n  //     method: \"POST\",\n  //     mode: \"cors\",\n  //     cache: \"no-cache\",\n  //     credentials: \"same-origin\",\n  //     headers: {\n  //       \"Content-Type\": \"application/json\",\n  //     },\n\n  //     body: JSON.stringify({\n  //       username: this.state.username,\n  //       password: this.state.password,\n  //     }),\n  //   }).then((response) => {\n\n  //     response.json().then(function (result) {\n  //       localStorage.setItem(\"access_token\", result['access_token']);\n  //       setAuthToken(result['access_token']);\n  //     });\n  //   });\n  // };\n  handleSubmit = (e) => {\n    //reqres registered sample user\n    const loginPayload = {\n      username: this.state.username,\n      password: this.state.password,\n    }\n  \n    axios.post(\"http://127.0.0.1:5000/login\", loginPayload)\n      .then(response => {\n        //get token from response\n        const token  =  response.data.access_token;\n        //set JWT token to local\n        console.log(token)\n        localStorage.setItem(\"token\", token);\n  \n        //set token to axios common header\n        setAuthToken(token);\n        window.location.href = '/projects'\n      \n       \n      }) \n      .catch(err => console.log(err));\n  };\n\n  handleOnChange = (value) => {\n    return (e) => {\n      this.setState({ [value]: e.target.value });\n    };\n  };\n\n  render() {\n    console.log(this.state);\n    return (\n      <div align=\"center\">\n        <h1 align=\"center\">Login</h1>\n        \n        <label >Username:</label>\n        <Input\n          onChange={this.handleOnChange(\"username\")}\n          value={this.state.username}\n        />\n        <label >Password:</label>\n        <Input\n          onChange={this.handleOnChange(\"password\")}\n          value={this.state.password}\n        />\n        <MyButton onClick={this.handleSubmit} />\n      </div>\n    );\n  }\n}\n\nclass MyButton extends React.Component {\n  render() {\n    return <button  className='MyButton' onClick={this.props.onClick}>login</button>;\n  }\n}\n\nclass Input extends React.Component {\n  render() {\n    return (\n      <input className='LoginInput'onChange={this.props.onChange} value={this.props.value}></input>\n    );\n  }\n}\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}