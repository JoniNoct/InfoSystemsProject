{"ast":null,"code":"var _jsxFileName = \"/home/joni/Documents/InfoSystemsProject/front_part/src/login.js\";\nimport logo from \"./logo.svg\";\nimport axios from 'axios';\nimport \"./App.css\";\nimport React, { Component } from \"react\";\nimport { setAuthToken } from \"./setAuth\";\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = e => {\n      //reqres registered sample user\n      const loginPayload = {\n        username: this.state.username,\n        password: this.state.password\n      };\n      axios.post(\"http://127.0.0.1:5000/login\", loginPayload).then(response => {\n        //get token from response\n        const token = response.data.access_token; //set JWT token to local\n\n        console.log(token);\n        localStorage.setItem(\"token\", token); //set token to axios common header\n\n        setAuthToken(token);\n        window.location.href = '/projects';\n      }).catch(err => console.log(err));\n    };\n\n    this.handleOnChange = value => {\n      return e => {\n        this.setState({\n          [value]: e.target.value\n        });\n      };\n    };\n\n    this.state = {\n      username: \"\",\n      password: \"\",\n      list: []\n    };\n  } // handleSubmit = (e) => {\n  //   fetch(\"http://127.0.0.1:5000/login\", {\n  //     method: \"POST\",\n  //     mode: \"cors\",\n  //     cache: \"no-cache\",\n  //     credentials: \"same-origin\",\n  //     headers: {\n  //       \"Content-Type\": \"application/json\",\n  //     },\n  //     body: JSON.stringify({\n  //       username: this.state.username,\n  //       password: this.state.password,\n  //     }),\n  //   }).then((response) => {\n  //     response.json().then(function (result) {\n  //       localStorage.setItem(\"access_token\", result['access_token']);\n  //       setAuthToken(result['access_token']);\n  //     });\n  //   });\n  // };\n\n\n  render() {\n    console.log(this.state);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      align: \"center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        align: \"center\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Username:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        onChange: this.handleOnChange(\"username\"),\n        value: this.state.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Password:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        onChange: this.handleOnChange(\"password\"),\n        value: this.state.password\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MyButton, {\n        onClick: this.handleSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass MyButton extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"MyButton\",\n      onClick: this.props.onClick,\n      children: \"login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 12\n    }, this);\n  }\n\n}\n\nclass Input extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"input\", {\n      className: \"LoginInput\",\n      onChange: this.props.onChange,\n      value: this.props.value\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Login;","map":{"version":3,"names":["axios","React","Component","setAuthToken","BrowserRouter","Router","Switch","Route","Link","Login","constructor","props","handleSubmit","e","loginPayload","username","state","password","post","then","response","token","data","access_token","console","log","localStorage","setItem","window","location","href","catch","err","handleOnChange","value","setState","target","list","render","MyButton","onClick","Input","onChange"],"sources":["/home/joni/Documents/InfoSystemsProject/front_part/src/login.js"],"sourcesContent":["import logo from \"./logo.svg\";\nimport axios from 'axios';\nimport \"./App.css\";\nimport React, { Component } from \"react\";\nimport { setAuthToken } from \"./setAuth\";\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { username: \"\", password: \"\", list: [] };\n  }\n\n  // handleSubmit = (e) => {\n  //   fetch(\"http://127.0.0.1:5000/login\", {\n  //     method: \"POST\",\n  //     mode: \"cors\",\n  //     cache: \"no-cache\",\n  //     credentials: \"same-origin\",\n  //     headers: {\n  //       \"Content-Type\": \"application/json\",\n  //     },\n\n  //     body: JSON.stringify({\n  //       username: this.state.username,\n  //       password: this.state.password,\n  //     }),\n  //   }).then((response) => {\n\n  //     response.json().then(function (result) {\n  //       localStorage.setItem(\"access_token\", result['access_token']);\n  //       setAuthToken(result['access_token']);\n  //     });\n  //   });\n  // };\n  handleSubmit = (e) => {\n    //reqres registered sample user\n    const loginPayload = {\n      username: this.state.username,\n      password: this.state.password,\n    }\n  \n    axios.post(\"http://127.0.0.1:5000/login\", loginPayload)\n      .then(response => {\n        //get token from response\n        const token  =  response.data.access_token;\n        //set JWT token to local\n        console.log(token)\n        localStorage.setItem(\"token\", token);\n  \n        //set token to axios common header\n        setAuthToken(token);\n        window.location.href = '/projects'\n      \n       \n      }) \n      .catch(err => console.log(err));\n  };\n\n  handleOnChange = (value) => {\n    return (e) => {\n      this.setState({ [value]: e.target.value });\n    };\n  };\n\n  render() {\n    console.log(this.state);\n    return (\n      <div align=\"center\">\n        <h1 align=\"center\">Login</h1>\n        \n        <label >Username:</label>\n        <Input\n          onChange={this.handleOnChange(\"username\")}\n          value={this.state.username}\n        />\n        <label >Password:</label>\n        <Input\n          onChange={this.handleOnChange(\"password\")}\n          value={this.state.password}\n        />\n        <MyButton onClick={this.handleSubmit} />\n      </div>\n    );\n  }\n}\n\nclass MyButton extends React.Component {\n  render() {\n    return <button  className='MyButton' onClick={this.props.onClick}>login</button>;\n  }\n}\n\nclass Input extends React.Component {\n  render() {\n    return (\n      <input className='LoginInput'onChange={this.props.onChange} value={this.props.value}></input>\n    );\n  }\n}\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}